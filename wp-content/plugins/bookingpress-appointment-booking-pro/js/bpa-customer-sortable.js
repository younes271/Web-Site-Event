"use strict";class BPACSortable{constructor(){var e=document.getElementById("bpa-input-fields"),e=(new Sortable(e,{group:{name:"bpa-fields",pull:"clone",put:!1},animation:0,sort:!1,filter:".bpa-restricted"}),document.getElementById("bpa-customer-draggable-container"));null!=e&&new Sortable(e,{group:{name:"bpa-fields"},animation:150,swapThreshold:.7,ghostClass:"bpa-sortable-placeholder",onAdd:function(e){let t=e.item;var i=t.getAttribute("data-type");e.item.replaceWith(""),BPACSortable.add_item_to_form(i)},onEnd:BPACSortable.sort_field_inside_list})}static add_item_to_form(e){let t=document.querySelectorAll(".bpa-customer-field-container:not(.bpa-customer-field-empty-container)").length;BPACSortable.bpa_add_field_to_list(e,t),setTimeout(function(){var e=document.querySelectorAll(".bpa-customer-field-container:not(.bpa-customer-field-empty-container)")[t];window.scrollTo({top:e.offsetTop,left:0,behavior:"smooth"})},100)}static bpa_add_field_to_list(e,t){e=BPACSortable.bpa_get_field_data(e,t);let i=app.customer_field_settings;i.splice(e.field_position,0,e),i.forEach((e,t)=>{e.field_position=parseInt(t)+1}),app.customer_field_settings=i,app.customer_field_settings.sort((e,t)=>e.field_position>t.field_position?1:t.field_position>e.field_position?-1:0)}static bpa_get_field_data(e,t){let i={};return i.field_position=t,i.id=BPACSortable.bpa_generate_field_id(),i.is_edit=!1,i.is_hide=!1,i.is_delete=!1,i.is_customer_field=1,i.placeholder="",i.field_options={visibility:"always"},"single_line"==e?(i.field_name="Single Line",i.placeholder="Single Line",i.field_type="Text",i.label="Single Line"):"textarea"==e?(i.field_name="Multi Line",i.placeholder="Multi Line",i.field_type="Textarea",i.label="Multi Line"):"checkbox"==e?(i.field_name="Checkbox",i.field_type="Checkbox",i.label="Checkbox",i.field_values=[{value:"Option 1",label:"Option 1"},{value:"Option 2",label:"Option 2"}],i.enable_preset_fields=!1,i.is_edit_values=!1,i.preset_field_choice=""):"radio"==e?(i.field_name="Radio",i.field_type="Radio",i.label="Radio",i.field_values=[{value:"Option 1",label:"Option 1"},{value:"Option 2",label:"Option 2"}],i.enable_preset_fields=!1,i.is_edit_values=!1,i.preset_field_choice=""):"dropdown"==e?(i.field_name="Dropdown",i.field_type="Dropdown",i.placeholder="Dropdown",i.label="Dropdown",i.field_values=[{value:"Option 1",label:"Option 1"},{value:"Option 2",label:"Option 2"}],i.enable_preset_fields=!1,i.is_edit_values=!1,i.preset_field_choice=""):"datepicker"==e&&(i.field_name="Datepicker",i.field_type="Date",i.placeholder="Date Picker",i.label="Datepicker",i.field_options.enable_timepicker=!1),i.is_blank=!1,i.meta_key=BPACSortable.bpa_generate_meta_key(i.field_type),i}static bpa_generate_meta_key(e,t){var i=e.toLowerCase(),l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let a=5,o=(5<=(t=void 0===t?1:t)&&(a=7),[]);var d=l.length-1;for(let e=0;e<a;e++){var n=BPACSortable.BPAgetRndInteger(0,d);o.push(l[n])}i=i+"_"+o.join("");return null!==document.querySelector('.bpa-field-wrapper-container[data-metakey="'+i+'"]')?(++t,BPACSortable.bpa_generate_meta_key(e,t)):i}static BPAgetRndInteger(e,t){return Math.floor(Math.random()*(t-e+1))+e}static bpa_generate_field_id(e){let t=1e3,i=(5<=(e=void 0===e?1:e)&&(t=1e4),Math.round(Math.random()*t));return null!==document.querySelector('.bpa-field-wrapper-container[data-field-id="'+i+'"]')&&(++e,i=BPACSortable.bpa_generate_field_id(e)),i}static sort_field_inside_list(e){let t=document.getElementsByClassName("bpa-customer-field-container"),l=app.customer_field_settings;if(0<t.length){let i=1,a=(t.forEach((e,t)=>{e.setAttribute("data-id",i),i++}),1);l.forEach((e,t)=>{let i=document.querySelector('.bpa-customer-field-container[data-field-id="'+e.id+'"]');var l=i.getAttribute("data-id");e.field_position=parseInt(l),a++}),app.customer_field_settings.sort((e,t)=>e.field_position>t.field_position?1:t.field_position>e.field_position?-1:0)}}}