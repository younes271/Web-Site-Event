!function(e){"use strict";var t=function(){};t.prototype.initUploader=function(t){var a,i,n,u=jQuery(".de-upload-button"),o=jQuery(".de-delete-upload-button"),s=this;void 0!==t&&(u=e(".is-dahz-mega-menu",t),o=jQuery(".de-delete-upload-button",t)),u.unbind("click"),o.unbind("click"),u.on("click",function(e){this,i=jQuery(this),n=i.parents(".de-uploader.de-mega-menu"),e.preventDefault(),a?a.open():(a=wp.media.frames.meta_image_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},library:{type:"image"}})).open(),a.off("select"),a.on("select",function(){var e,t,i,u=a.state().get("selection").first().toJSON();"object"==typeof u&&(void 0!==u.sizes?void 0!==u.sizes.thumbnail?(e=u.sizes.thumbnail.url,t=u.sizes.thumbnail.width,i=u.sizes.thumbnail.height):void 0!==u.sizes.medium?(e=u.sizes.medium.url,t=u.sizes.medium.width,i=u.sizes.medium.height):void 0!==u.sizes.full?(e=u.sizes.full.url,t=u.sizes.full.width,i=u.sizes.full.height):(e=u.url,t=u.width,i=u.height):(e=u.url,t=u.width,i=u.height),s.setImageUpload(n,e,t,i),s.setValueUpload(n,u.id))})}),o.on("click",function(t){i=jQuery(this),n=i.parents(".de-uploader.de-mega-menu"),e("img",n).remove(),s.setValueUpload(n,"")})},t.prototype.setImageUpload=function(t,a,i,n){var u=e("img",t);u.length?(u.attr("src",a),u.attr("width",i),u.attr("height",n)):t.prepend('<img src="'+a+'" width="'+i+'" height="'+n+'" >')},t.prototype.setValueUpload=function(t,a){e(".de-to-element.de-uploader-path",t).val(a).change()},t.prototype.initAutoComplete=function(t){var a=this,i=e(".de-autocomplete-megamenu");void 0!==t&&(i=e(".de-autocomplete-megamenu",t)),i.each(function(){var t=this,i=e(t).parent().parent().parent();a.setDataAutoComplete(t,e(".source-carousel",i).val()),e(".source-carousel",i).on("change",function(){a.setDataAutoComplete(t,e(this).val())})})},t.prototype.setDataAutoComplete=function(t,a){var i={searchContain:!0,textProperty:"id: {id} , name: {text}",valueProperty:"id",minLength:1,focusFirstResult:!0,selectionRequired:!0,visibleProperties:["text"],searchIn:["text","id"],url:ajaxurl,cache:!1,params:{action:"dahz_framework_autocomplete",source:a},chainedRelatives:!0,toggleSelected:!1};e(t).hasClass("flexdatalist-set")&&e(t).flexdatalist("destroy"),e(t).flexdatalist(i)},t.prototype.init=function(t){this.initUploader(t),this.initAutoComplete(t);var a=e(".is-dahz-mega-menu");void 0!==t&&(a=e(".is-dahz-mega-menu",t)),a.each(function(){var t=e(this).parent().parent().parent(),a=[],i=e(".menu-item-data-db-id",t).val();if(e('.menu-item-data-parent-id[value="'+i+'"]').each(function(){t=e(this).parent(),i=e(".menu-item-data-db-id",t).val(),a.push(t),e('.menu-item-data-parent-id[value="'+i+'"]').each(function(){a.push(e(this).parent())})}),this.checked){e(".de-mega-menu",e(this).parent().parent().parent()).show();for(var n in a)e(".de-mega-menu",a[n]).show()}else{e(".de-mega-menu",e(this).parent().parent().parent()).hide();for(var n in a)e(".de-mega-menu",a[n]).hide()}}),a.change(function(){var t=e(this).parent().parent().parent(),a=[],i=e(".menu-item-data-db-id",t).val();if(e('.menu-item-data-parent-id[value="'+i+'"]').each(function(){t=e(this).parent(),i=e(".menu-item-data-db-id",t).val(),a.push(t),e('.menu-item-data-parent-id[value="'+i+'"]').each(function(){a.push(e(this).parent())})}),this.checked){e(".de-mega-menu",e(this).parent().parent().parent()).show();for(var n in a)e(".de-mega-menu",a[n]).show()}else{e(".de-mega-menu",e(this).parent().parent().parent()).hide();for(var n in a)e(".de-mega-menu",a[n]).hide()}})},wpNavMenu.addItemToMenu=function(t,a,i){var n,u=e("#menu").val(),o=e("#menu-settings-column-nonce").val();a=a||function(){},i=i||function(){},n={action:"add-menu-item",menu:u,"menu-settings-column-nonce":o,"menu-item":t},e.post(ajaxurl,n,function(t){var u=e("#menu-instructions");t=e.trim(t),a(t,n),e("li.pending").hide().fadeIn("slow"),e(".drag-instructions").show(),!u.hasClass("menu-instructions-inactive")&&u.siblings().length&&u.addClass("menu-instructions-inactive"),i(),dfNavMegamenuObj.init(e(t))})},e(document).on("ready",function(){window.dfNavMegamenuObj=new t,dfNavMegamenuObj.init()})}(jQuery);