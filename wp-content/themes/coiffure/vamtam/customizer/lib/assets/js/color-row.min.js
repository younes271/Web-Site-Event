wp.customize.controlConstructor["vamtam-color-row"]=wp.customize.Control.extend({ready:function(){"use strict";var n=this,t=n.params.choices,a=Object.keys(t),e=this.params.value,o="vamtam_theme[accent-color]"==this.id,r=this.params.with_hc;function s(){document.querySelector(n.selector).querySelectorAll(".vamtam-color-row-container .vamtam-color-row-single-color-wrapper:nth-child(4)").forEach(function(t){t.classList.contains("vamtam-disable-color-picker")||t.classList.add("vamtam-disable-color-picker")});for(let t=1;t<=8;t++)document.documentElement.style.setProperty(`--vamtam-accent-color-${t}-hc`,tinycolor.mostReadable(e[t],["#fff","#000"]).toHexString())}function i(t,a,e){e.checked?(a["auto-contrast"]=!0,s()):(a["auto-contrast"]=!1,document.querySelector(n.selector).querySelectorAll(".vamtam-color-row-container .vamtam-color-row-single-color-wrapper:nth-child(4)").forEach(function(t){t.classList.contains("vamtam-disable-color-picker")&&t.classList.remove("vamtam-disable-color-picker")})),n.setValue(a,!1),n.renderWarning(n)}o&&r&&(this.renderWarning(n),n.container.find(".automatic-contrast-colors").trigger("change"),void 0!==e["auto-contrast"])&&e["auto-contrast"]&&s(),this.settingField=this.container.find("[data-customize-setting-link]").first();for(var c=0;c<Object.keys(t).length;c++)if("auto-contrast"==a[c]){var l=this.id+"-auto-contrast";const m=document.getElementById(l);m.addEventListener("change",t=>i(0,e,m))}else!function(t,a,e){var n=t.container.find(".vamtam-color-row-index-"+e);n.wpColorPicker({change:function(){setTimeout(function(){o&&r?(a[e]=n.val(),t.setValue(a,!1),t.container.find(".vamtam-color-row-index-"+e).trigger("change"),t.renderWarning(t),t.params.value["auto-contrast"]&&e.match(/^\d$/)&&document.documentElement.style.setProperty(`--vamtam-accent-color-${e}-hc`,tinycolor.mostReadable(n.val(),["#fff","#000"]).toHexString())):(a[e]=n.val(),t.setValue(a,!1),t.container.find(".vamtam-color-row-index-"+e).trigger("change"))},100)},palettes:!1})}(this,e,a[c])},setValue:function(t,a){"use strict";var e={};_.each(t,function(t,a){e[a]=t}),this.setting.set(e),a&&this.settingField.trigger("change")},renderWarning:function(t){var a=t.params.value,a=t.getWarnings(a);t.colorWarningIconManager(t,a),t.registerTooltipEventListener(t)},registerTooltipEventListener:function(a){a.clearTooltipEventListener(a);var e=document.getElementsByClassName("dashicons-warning");for(let t=0;t<e.length;t++){var n=e[t];n.addEventListener("mouseover",a.ttTurnOn.bind(a),!1),n.addEventListener("mouseout",a.ttTurnOff,!1)}},clearTooltipEventListener:function(a){for(let t=1;t<=8;t++){var e=document.getElementById("color-row-warning-"+t);e.removeEventListener("mouseover",a.ttTurnOn.bind(a),!1),e.removeEventListener("mouseout",a.ttTurnOff,!1)}},ttTurnOn:function(t){var a=document.getElementById("vamtam-warning-tooltip"),a=(a&&a.parentNode.removeChild(a),this.params.value["auto-contrast"]?vamtamColorRowObj.tooltip_msg_auto:vamtamColorRowObj.tooltip_msg),e=document.createElement("div"),a=(e.id="vamtam-warning-tooltip",`<div class="desc">
										<p>${a}</p>
									</div>
									<div class="info">
										<div class="level"> <span class="red">A</span>AA</div>
										<div class="read-more"><a target="_blank" href="https://www.w3.org/WAI/WCAG21/quickref/?versions=2.0#distinguishable">Read more</a></div>
									</div>
									<i></i>`);e.innerHTML=a,t.target.closest(".vamtam-color-row-container").appendChild(e)},ttTurnOff:t=>{let a=t.target.closest(".vamtam-color-row-container");setTimeout(function(){var t=document.getElementById("vamtam-warning-tooltip");t&&a.contains(t)&&a.removeChild(t)},1e3)},getWarnings:function(e){var n={level:"AAA",size:"small"},o={level:"AA",size:"small"},r=[],s=[];for(let a=1;a<=8;a++){var i=e[a];let t=e[a+"-hc"];e["auto-contrast"]&&(t=tinycolor.mostReadable(i,["#fff","#000"]).toHexString()),tinycolor.isReadable(i,t,o)?tinycolor.isReadable(i,t,n)||r.push(a):s.push(a)}return{aaa:r,aa:s}},colorWarningIconManager:function(t,a){t.clearIcons(t),a.aaa&&a.aaa.length&&t.addIcons(a.aaa,"aaa"),a.aa&&a.aa.length&&t.addIcons(a.aa,"aa")},addIcons:function(a,t){var e="contrast-warning-"+t;if(a||0!==a.length)for(let t=0;t<a.length;t++){var n="color-row-warning-"+a[t],n=document.getElementById(n);n.classList.contains("dashicons-yes-alt")&&n.classList.remove("dashicons-yes-alt"),n.classList.add("dashicons-warning"),n.classList.add(e)}},clearIcons:function(t){var a=document.getElementById(t.container[0].id).querySelectorAll(".vamtam-color-row-container .color-row-warning .dashicons");for(let t=0;t<a.length;t++)a[t].classList.contains("dashicons-warning")&&a[t].classList.remove("dashicons-warning"),a[t].classList.contains("contrast-warning-aaa")&&a[t].classList.remove("contrast-warning-aaa"),a[t].classList.contains("contrast-warning-aa")&&a[t].classList.remove("contrast-warning-aa"),a[t].classList.contains("dashicons-yes-alt")||a[t].classList.add("dashicons-yes-alt")}});