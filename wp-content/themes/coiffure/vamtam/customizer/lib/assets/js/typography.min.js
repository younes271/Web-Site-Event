!function(r,s){"use strict";wp.customize.controlConstructor["vamtam-typography"]=wp.customize.Control.extend({ready:function(){function e(t,e){var n,a=r(c),e=e||a.val();a.empty();let o;for(n in VAMTAM_ALL_FONTS){var i,s=VAMTAM_ALL_FONTS[n];if(t===(o=s).family){for(var l of s.weights)isNaN(l)&&"bold"!==l&&"normal"!==l||((i=r("<option>")).text(l),a.append(i));break}}o&&(-1<o.weights.indexOf(e)?a.val(e):a.val(-1<o.weights.indexOf("normal")?"normal":o.weights[0]))}function t(t){return r("<span style=\"font-family:'"+t.text+"';\">"+t.text+"</span>")}var n,a=this,o=a.selector+" .font-family select",c=a.selector+" .font-weight select",i={};_.each(a.params.default,function(t,e){!1!==t&&(i[e]=t,a.params.value[e]!==a.setting._value[e]&&a.params.value.hasOwnProperty(e)&&(a.setting._value[e]=a.params.value[e]),s!==a.setting._value[e])&&(i[e]=a.setting._value[e])}),_.each(a.setting._value,function(t,e){s!==i[e]&&void 0!==i[e]||(i[e]=t)}),r(o).val(a.setting._value["font-family"]);r(o).vamtamSelect2({dropdownParent:r(a.selector+" .font-family"),templateResult:t,templateSelection:t}),VAMTAM_CUSTOMIZER.controls.addSelectiveFontLoadingToSelect2(this,r(o)),e(i["font-family"],i["font-weight"]),this.container.on("change",".font-family select",function(){var t=r(this).val();t&&(i["font-family"]=t,a.saveValue(i),e(t,null),r(this).css("font-family",i["font-family"]))}),VAMTAM_CUSTOMIZER.controls.addSelectsChangeHandlers(this,i),VAMTAM_CUSTOMIZER.controls.addInputsChangeHandlers(this,i),VAMTAM_CUSTOMIZER.controls.addUnitHandlers(this,i),VAMTAM_CUSTOMIZER.controls.addRespBtnHandlers(this,i),(n=this.container.find(".vamtam-color-picker")).wpColorPicker({change:function(){setTimeout(function(){i.color=n.val(),a.saveValue(i)},100)}}),VAMTAM_CUSTOMIZER.controls.updateDummyProp(i),a.saveValue(i),setTimeout(()=>{wp.customize.state("saved").set(!0)},1)},saveValue:function(t){var n={};_.each(t,function(t,e){n[e]=t}),this.setting.set(n)}}),r(document).on("ready",function(){wp.customize.previewedDevice.bind(function(t){r(".resp-btns [data-device="+("mobile"===t?"phone":t)+"]").each(function(t,e){r(e).click()})})})}(jQuery);