!function(b,e){"use strict";function t(e){var s=this,i={handlerId:"",cache:!1,processData:!0,url:"",async:!1,beforeSendCallback:function(){},errorCallback:function(){},successCallback:function(){},completeCallback:function(){}};if(e&&b.extend(i,e),!window[i.handlerId])return window.console&&window.console.warn("Handler id not found"),!1;s.handlerSettings=window[i.handlerId]||{},s.ajaxRequest=null,s.ajaxProcessing=!1,s.data={action:s.handlerSettings.action,nonce:s.handlerSettings.nonce},""===i.url&&(s.handlerSettings.is_public,i.url=window.LaStudioElementConfigs.ajaxurl),s.send=function(){s.ajaxProcessing&&n.noticeCreate("error-notice",s.handlerSettings.sys_messages.wait_processing,s.handlerSettings.is_public),s.ajaxProcessing=!0,s.ajaxRequest=jQuery.ajax({type:s.handlerSettings.type,url:i.url,data:s.data,cache:i.cache,dataType:s.handlerSettings.data_type,processData:i.processData,beforeSend:function(e,a){null===s.ajaxRequest||i.async||s.ajaxRequest.abort(),i.beforeSendCallback&&"function"==typeof i.beforeSendCallback&&i.beforeSendCallback(e,a)},error:function(e,a,t){b(document).trigger({type:"lastudio-ajax-handler-error",jqXHR:e,textStatus:a,errorThrown:t}),i.errorCallback&&"function"==typeof i.errorCallback&&i.errorCallback(e,a,t)},success:function(e,a,t){s.ajaxProcessing=!1,b(document).trigger({type:"lastudio-ajax-handler-success",response:e,jqXHR:t,textStatus:a}),i.successCallback&&"function"==typeof i.successCallback&&i.successCallback(e,a,t),n.noticeCreate(e.type,e.message,s.handlerSettings.is_public)},complete:function(e,a){b(document).trigger({type:"lastudio-ajax-handler-complete",jqXHR:e,textStatus:a}),i.completeCallback&&"function"==typeof i.completeCallback&&i.completeCallback(e,a)}})},s.sendData=function(e){var a=e||{};s.data={action:s.handlerSettings.action,nonce:s.handlerSettings.nonce,data:a},s.send()},s.sendFormData=function(e){var a,t=b(e);a=n.serializeObject(t),s.sendData(a)}}var n={noticeCreate:function(e,a,t){var s,i,n,o=0;if(!a||"true"===(t||!1))return!1;s=b('<div class="lastudio-handler-notice '+e+'"><span class="dashicons"></span><div class="inner">'+a+"</div></div>"),b("body").prepend(s),n=100,b(".lastudio-handler-notice").each(function(){b(this).css({top:n}),n+=b(this).outerHeight(!0)}),o=-1*(s.outerWidth(!0)+10),s.css({right:o}),i=setTimeout(function(){s.css({right:10}).addClass("show-state")},100),i=setTimeout(function(){o=-1*(s.outerWidth(!0)+10),s.css({right:o}).removeClass("show-state")},4e3),i=setTimeout(function(){s.remove(),clearTimeout(i)},4500)},serializeObject:function(e){var i=this,n={},a={},o={validate:/^[a-zA-Z][a-zA-Z0-9_-]*(?:\[(?:\d*|[a-zA-Z0-9_-]+)\])*$/,key:/[a-zA-Z0-9_-]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_-]+$/};return this.build=function(e,a,t){return e[a]=t,e},this.push_counter=function(e){return void 0===a[e]&&(a[e]=0),a[e]++},b.each(e.serializeArray(),function(){var e,a,t,s;if(o.validate.test(this.name)){for(a=this.name.match(o.key),t=this.value,s=this.name;void 0!==(e=a.pop());)s=s.replace(new RegExp("\\["+e+"\\]$"),""),e.match(o.push)?t=i.build([],i.push_counter(s),t):e.match(o.fixed)?t=i.build([],e,t):e.match(o.named)&&(t=i.build({},e,t));n=b.extend(!0,n,t)}}),n}};b(window).on("elementor/frontend/init",function(){e.hooks.addAction("frontend/element_ready/lastudio-subscribe-form.default",function(e){var i=e.find(".lastudio-subscribe-form"),n=e.data("id"),o=i.data("settings"),r=b(".lastudio-subscribe-form__form",i),l=(b(".lastudio-subscribe-form__fields",i),b(".lastudio-subscribe-form__mail-field",i)),c=l.data("instance-data"),d=b(".lastudio-subscribe-form__submit",i),u=b(".lastudio-subscribe-form__message",i),f=window.lastudio_elementor_subscribe_form_ajax.sys_messages.invalid_mail||window.LaStudioElementConfigs.invalidMail,m=new t({handlerId:"lastudio_elementor_subscribe_form_ajax",successCallback:function(e){var a=e.type,t=e.message||"",s="lastudio-subscribe-form--response-"+a;d.removeClass("loading"),i.removeClass("lastudio-subscribe-form--response-error"),i.addClass(s),b("span",u).html(t),u.css({visibility:"visible"}),setTimeout(function(){u.css({visibility:"hidden"}),i.removeClass(s)},2e4),o.redirect&&(window.location.href=o.redirect_url),b(window).trigger({type:"LaStudioElement/subscribe",elementId:n,successType:a,inputData:c})}});function a(){var e=l.val(),t={email:e,use_target_list_id:o.use_target_list_id||!1,target_list_id:o.target_list_id||"",data:c},a=r.serializeArray(),s={};window.LaStudioElementTools.validateEmail(e)?(b.each(a,function(e,a){"email"===a.name?t[a.name]=a.value:s[a.name]=a.value}),t.additional=s,m.sendData(t),d.addClass("loading")):(l.addClass("mail-invalid"),i.addClass("lastudio-subscribe-form--response-error"),b("span",u).html(f),u.css({visibility:"visible"}),setTimeout(function(){i.removeClass("lastudio-subscribe-form--response-error"),u.css({visibility:"hidden"}),l.removeClass("mail-invalid")},2e4))}l.on("focus",function(){l.removeClass("mail-invalid")}),b(document).keydown(function(e){if(13===e.keyCode&&l.is(":focus"))return a(),!1}),d.on("click",function(){return a(),!1})})})}(jQuery,window.elementorFrontend);