!function(x){"use strict";x(function(){var k=[];x(".job_listings").on("update_results",function(e,a,i,n){var t,o,r,s="",l=x(this),d=l.find(".job_filters"),_=l.find(".showing_jobs"),g=l.find(".job_listings"),c=l.data("per_page"),h=l.data("orderby"),f=l.data("order"),p=l.data("featured"),u=l.data("filled"),m=l.data("job_types"),b=l.data("post_status"),j=x("div.job_listings").index(this);if(!(j<0)){if(k[j]&&k[j].abort(),!0===l.data("show_filters")){var v=[];x(':input[name="filter_job_type[]"]:checked, :input[name="filter_job_type[]"][type="hidden"], :input[name="filter_job_type"]',d).each(function(){v.push(x(this).val())}),t=d.find(':input[name^="search_categories"]').map(function(){return x(this).val()}).get(),r=o="";var w=d.find(':input[name="search_keywords"]'),y=d.find(':input[name="search_location"]');w.val()!==w.attr("placeholder")&&(o=w.val()),y.val()!==y.attr("placeholder")&&(r=y.val()),s={lang:job_manager_ajax_filters.lang,search_keywords:o,search_location:r,search_categories:t,filter_job_type:v,filter_post_status:b,per_page:c,orderby:h,order:f,page:a,featured:p,filled:u,show_pagination:l.data("show_pagination"),form_data:d.serialize()}}else t=l.data("categories"),o=l.data("keywords"),r=l.data("location"),t&&("string"!=typeof t&&(t=String(t)),t=t.split(",")),s={lang:job_manager_ajax_filters.lang,search_categories:t,search_keywords:o,search_location:r,filter_post_status:b,filter_job_type:m,per_page:c,orderby:h,order:f,page:a,featured:p,filled:u,show_pagination:l.data("show_pagination")};l.find('[name="filter_size_range"]').length&&""!=l.find('[name="filter_size_range"]').val()&&(s.filter_size_range=l.find('[name="filter_size_range"]').val()),l.find('[name="filter_bathroom"]').length&&""!=l.find('[name="filter_bathroom"]').val()&&(s.filter_bathroom=l.find('[name="filter_bathroom"]').val()),l.find('[name="filter_bedroom"]').length&&""!=l.find('[name="filter_bedroom"]').val()&&(s.filter_bedroom=l.find('[name="filter_bedroom"]').val()),l.find('[name="filter_price_range"]').length&&""!=l.find('[name="filter_price_range"]').val()&&(s.filter_price_range=l.find('[name="filter_price_range"]').val()),k[j]=x.ajax({type:"POST",url:job_manager_ajax_filters.ajax_url.toString().replace("%%endpoint%%","get_listings"),data:s,success:function(e){if(e)try{if(e.showing){var t=jQuery("<span>").html(e.showing);x(_).show().html("").html(e.showing_links).prepend(t)}else x(_).hide();e.showing_all?x(_).addClass("wp-job-manager-showing-all"):x(_).removeClass("wp-job-manager-showing-all"),e.html&&(i&&n?x(g).prepend(e.html):i?x(g).append(e.html):x(g).html(e.html)),!0===l.data("show_pagination")?(l.find(".job-manager-pagination").remove(),e.pagination&&l.append(e.pagination)):(!e.found_jobs||e.max_num_pages<=a?x(".load_more_jobs:not(.load_previous)",l).hide():n||x(".load_more_jobs",l).show(),x(".load_more_jobs",l).removeClass("loading"),x("li.job_listing",g).css("visibility","visible")),x(g).removeClass("loading"),l.triggerHandler("updated_results",e)}catch(e){window.console&&window.console.log(e)}},error:function(e,t,a){window.console&&"abort"!==t&&window.console.log(t+": "+a)},statusCode:{404:function(){window.console&&window.console.log("Error 404: Ajax Endpoint cannot be reached. Go to Settings > Permalinks and save to resolve.")}}})}}),x("#search_keywords, #search_location, .job_types :input, #search_categories, .job-manager-filter, .search_jobs select.lastudio-wpjm-select").change(function(){var e=x(this).closest("div.job_listings");e.triggerHandler("update_results",[1,!1]),i(e,1)}).on("keyup",function(e){13===e.which&&x(this).trigger("change")}),x(".job_filters").on("click",".reset",function(){var e=x(this).closest("div.job_listings"),t=x(this).closest("form");return t.find(':input[name="search_keywords"], :input[name="search_location"], .job-manager-filter').not(':input[type="hidden"]').val("").trigger("change.select2"),t.find(':input[name^="search_categories"]').not(':input[type="hidden"]').val("").trigger("change.select2"),x(':input[name="filter_job_type[]"]',t).not(':input[type="hidden"]').attr("checked","checked"),t.find(".lastudio-wpjm-select").not(':input[type="hidden"]').val("").trigger("change.select2"),e.triggerHandler("reset"),e.triggerHandler("update_results",[1,!1]),i(e,1),!1}).on("submit",function(){if(!x(this).closest("div.job_listings").hasClass("is-externalsearch"))return!1}),x(document.body).on("click",".load_more_jobs",function(){var e=x(this).closest("div.job_listings"),t=parseInt(x(this).data("page")||1,10),a=!1;return x(this).addClass("loading"),x(this).is(".load_previous")?(a=!0,1===(t-=1)?x(this).remove():x(this).data("page",t)):(t+=1,x(this).data("page",t),i(e,t)),e.triggerHandler("update_results",[t,!0,a]),!1}),x("div.job_listings").on("click",".job-manager-pagination a",function(){var e=x(this).closest("div.job_listings"),t=x(this).data("page");return i(e,t),e.triggerHandler("update_results",[t,!1]),x("body, html").animate({scrollTop:e.offset().top},600),!1});var o=!1;window.history&&window.history.pushState&&(o=!0);var r=document.location.href.split("#")[0];function i(e,t){if(o){var a=e.find(".job_filters"),i=x(a).serialize(),n=x("div.job_listings").index(e);window.history.replaceState({id:"job_manager_state",page:t,data:i,index:n},"",r+"#s=1")}}x(".job_filters .lastudio-search-submit .fake-form-action").each(function(){x(this).closest(".job_filters").attr("action",x(this).attr("data-action")).attr("method","get")}),x(window).on("load",function(){x(".job_filters").each(function(){var e=x(this).closest("div.job_listings"),t=e.find(".job_filters"),a=1,i=x("div.job_listings").index(e);if(!e.hasClass("is-externalsearch")){if(window.history.state&&window.location.hash){var n=window.history.state;n.id&&"job_manager_state"===n.id&&i===n.index&&(a=n.page,t.deserialize(n.data),t.find(':input[name^="search_categories"]').not(':input[type="hidden"]').trigger("change.select2"))}e.triggerHandler("update_results",[a,!1])}})})})}(jQuery);