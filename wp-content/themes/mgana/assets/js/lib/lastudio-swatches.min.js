!function(h){"use strict";function o(e,a){this.recalc_needed=!0,this.variation_attributes=e,this.variations_available=a,this.variations_current={},this.variations_selected={},this.reset_current=function(){for(var e in this.variation_attributes){this.variations_current[e]={};for(var a=0;a<this.variation_attributes[e].length;a++)this.variations_current[e.toString()][this.variation_attributes[e][a].toString()]=0}},this.update_current=function(){this.reset_current();for(var e=0;e<this.variations_available.length;e++)if(this.variations_available[e].variation_is_active){var a=this.variations_available[e].attributes;for(var t in a){var i=a[t],s=this.variations_selected[t];if(s&&s==i)this.variations_current[t][i]=1;else{var r=!0;for(var l in this.variations_selected)if(l!=t){var n=this.variations_selected[l],o=a[l];n&&o&&n!=o&&(r=!1)}if(r)if(""===i)for(var c in this.variations_current[t])this.variations_current[t][c]=1;else this.variations_current[t][i]=1}}}this.recalc_needed=!1},this.get_current=function(){return this.recalc_needed&&this.update_current(),this.variations_current},this.reset_selected=function(){this.recalc_needed=!0,this.variations_selected={}},this.set_selected=function(e,a){this.recalc_needed=!0,this.variations_selected[e]=a},this.get_selected=function(){return this.variations_selected}}function n(e,a){var t=e.closest(".la-p-single-wrap").find(".product--large-image"),i="";if(null!==a)i=function(e){var t="";return void 0!==e&&h.isArray(e.la_additional_images)&&h.each(e.la_additional_images,function(e,a){t+='<div data-thumb="'+a.thumb[0]+'" class="woocommerce-product-gallery__image">',t+='<a href="'+a.large[0]+'" data-videolink="'+a.videolink+'">',t+='<span class="g-overlay" style="background-image: url('+a.large[0]+')"></span>',t+="<img ",t+='width="'+a.single[1]+'" ',t+='height="'+a.single[2]+'" ',t+='src="'+a.single[0]+'" ',t+='class="attachment-shop_single size-shop_single" ',t+='alt="'+a.alt+'" ',t+='title="'+a.title+'" ',t+='data-caption="'+a.caption+'" ',t+='data-src="'+a.large[0]+'" ',t+='data-large_image="'+a.large[0]+'" ',t+='data-large_image_width="'+a.large[1]+'" ',t+='data-large_image_height="'+a.large[2]+'" ',t+='srcset="'+a.srcset+'" ',t+='sizes="'+a.sizes+'" ',t+="</a>",t+="</div>"}),t}(a);else{var s=t.data("old_gallery")||!1;s&&(i=s)}if(""!=i){if(t.data("prev_gallery")){var r=h(t.data("prev_gallery")),l=h(i),n=!0;if(r.length==l.length)for(var o=0;o<r.length;o++)h(r[o]).attr("data-thumb")!=h(l[o]).attr("data-thumb")&&(n=!1);else n=!1;if(n)return}t.data("prev_gallery",i);var c='<div class="woocommerce-product-gallery--with-images la-woo-product-gallery'+(t.hasClass("force-disable-slider-script")?" force-disable-slider-script":"")+'">';t.data("gallery_action")&&(c+=t.data("gallery_action")),c+='<figure class="woocommerce-product-gallery__wrapper">'+i+'</figure><div class="la_woo_loading"><div class="la-loader spinner3"><div class="dot1"></div><div class="dot2"></div><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div></div>',c+='<div id="la_woo_thumbs" class="la-woo-thumbs"><div class="la-thumb-inner"></div></div>',t.removeAttr("data-element-loaded").css({"max-height":t.height(),"min-height":t.height()}).addClass("swatch-loading"),t.html(c);var d=t.find(".la-woo-product-gallery");null!==a&&d.addClass("la-rebuild-product-gallery"),d.lastudio_product_gallery().addClass("swatch-loaded"),t.css({"max-height":"none","min-height":"200px"})}}h.fn.lastudio_variation_form=function(){var s=this,t=parseInt(s.data("product_id"),10),i=null,l=!1,r=null;s.addClass("la-init-swatches"),s.find("td.label").each(function(){h(this).find("label").append('<span class="swatch-label"></span>')}),s.on("bind_calculator",function(){var e=s.data("product_variations");(l=!1===e)&&s.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var n={};if(s.find(".select-option.selected").each(function(e,a){var t=h(this),i=t.closest("div.select").eq(0),s=i.closest("tr").find(".swatch-label").eq(0),r=i.find("select").first(),l=h("<div/>").html(t.data("value")).text();l=(l=l.replace(/'/g,"\\'")).replace(/"/g,'\\"'),s&&s.html(r.children("[value='"+l+"']").eq(0).text()),r.trigger("change")}),s.find(".variations select").each(function(e,a){var t=h(a),i=t.data("attribute_name")||t.attr("name");n[i]=[];var s;if((s=t.find("option:gt(0)").get()).length)for(var r=0;r<s.length;r++){var l=s[r];n[i].push(h(l).val())}}),l){r&&r.abort();var a={product_id:t,action:"la_swatch_get_product_variations"};r=h.ajax({url:la_theme_config.ajax_url,type:"POST",data:a,success:function(e){i=new o(n,e.data,null,null),s.unblock()}})}else i=new o(n,e,null,null);s.trigger("woocommerce_variation_has_changed")}),s.on("change",".wc-default-select",function(e){var a=h(this),t=a.closest("tr").find(".swatch-label").eq(0);""!=a.val()?t.html(a.find("option:selected").html()):t.html("")}),s.find(".wc-default-select").trigger("change"),s.on("click",".reset_variations",function(){return s.find(".swatch-label").html(""),s.find(".select-option").removeClass("selected"),s.find(".radio-option").prop("checked",!1),h("span.price",s.siblings(".single-price-wrapper")).remove(),!1}).on("click",".select-option",function(e){e.preventDefault();var a=h(this),t=a.closest("div.select").eq(0),i=t.closest("tr").find(".swatch-label").eq(0),s=t.find("select").first();if(a.hasClass("disabled"))return!1;if(a.hasClass("selected"))a.removeClass("selected"),s.children("option:eq(0)").prop("selected","selected").change(),i&&i.html("");else{t.find(".select-option").removeClass("selected"),a.addClass("selected");var r=h("<div/>").html(a.data("value")).text();r=(r=r.replace(/'/g,"\\'")).replace(/"/g,'\\"'),s.trigger("focusin").children("[value='"+r+"']").prop("selected","selected").change(),i&&i.html(s.children("[value='"+r+"']").eq(0).text())}}).on("change",".radio-option",function(e){var a=h(this),t=a.closest("div.select").eq(0).find("select").first(),i=h("<div/>").html(a.val()).text();i=(i=i.replace(/'/g,"\\'")).replace(/"/g,'\\"'),t.trigger("focusin").children("[value='"+i+"']").prop("selected","selected").change()}).on("woocommerce_variation_has_changed",function(){if(null!==i){s.find(".variations select").each(function(){var e=h(this).data("attribute_name")||h(this).attr("name");i.set_selected(e,h(this).val())});var r=i.get_current();s.find("div.select").each(function(e,a){var t=h(a).find("select").first(),i=t.data("attribute_name")||t.attr("name"),s=r[i];h(a).find("div.select-option").each(function(e,a){s[h(a).data("value")]?h(a).removeClass("disabled"):h(a).addClass("disabled","disabled")}),h(a).find("input.radio-option").each(function(e,a){s[h(a).val()]?(h(a).removeAttr("disabled"),h(a).parent().removeClass("disabled")):(h(a).attr("disabled","disabled"),h(a).parent().addClass("disabled","disabled"))})}),l&&s.find(".wc-default-select").each(function(e,a){var t=h(a),i=t.data("attribute_name")||t.attr("name"),s=r[i];t.find("option:gt(0)").removeClass("attached"),t.find("option:gt(0)").removeClass("enabled"),t.find("option:gt(0)").removeAttr("disabled"),t.find("option:gt(0)").each(function(e,a){s[h(a).val()]?(h(a).addClass("attached"),h(a).addClass("enabled")):h(a).addClass("disabled","disabled")}),t.find("option:gt(0):not(.enabled)").attr("disabled","disabled")})}}).on("found_variation",function(e,a){n(s,a)}).on("reset_image",function(e){n(s,null)}),s.find(".single_variation").on("show_variation",function(e,a,t){var i=s.siblings(".single-price-wrapper");h("span.price",i).remove(),i.append(a.price_html)})},h(function(){var t=[];la_theme_config.la_extension_available.swatches?h(document).on("wc_variation_form","form.variations_form",function(e){var a=h(e.target);t.push(a),a.data("has_swatches_form")||(a.data("has_swatches_form",!0),a.lastudio_variation_form(),a.trigger("bind_calculator"),a.on("reload_product_variations",function(){for(var e=0;e<t.length;e++)t[e].trigger("woocommerce_variation_has_changed"),t[e].trigger("bind_calculator"),t[e].trigger("woocommerce_variation_has_changed")}))}):console.log("la_theme_config.la_extension_available.swatches is not activate")})}(jQuery);